from ..musicbrainz import MusicBrainz

xml = """<?xml version="1.0" encoding="UTF-8"?>
<metadata xmlns="http://musicbrainz.org/ns/mmd-2.0#"><release-group-list count="23"><release-group id="c6754aa0-598d-387b-b8ca-a295e5bd3b1f" type="Album" type-id="f529b476-6e62-324f-b0aa-1f3e33d313fc"><title>Sob a lua do bode / Demoniac Vengeance</title><first-release-date>2000-01</first-release-date><primary-type id="f529b476-6e62-324f-b0aa-1f3e33d313fc">Album</primary-type></release-group><release-group id="69aecc7d-e492-3d4a-af43-5b7ae5aa6ee8" type="Album" type-id="f529b476-6e62-324f-b0aa-1f3e33d313fc"><title>Infernal Battles</title><first-release-date>2000-06-20</first-release-date><primary-type id="f529b476-6e62-324f-b0aa-1f3e33d313fc">Album</primary-type></release-group><release-group id="cce58d71-4eea-3971-949d-cf2a62e0ab17" type="Album" type-id="f529b476-6e62-324f-b0aa-1f3e33d313fc"><title>Clandestine Blaze / Deathspell Omega</title><first-release-date>2001</first-release-date><primary-type id="f529b476-6e62-324f-b0aa-1f3e33d313fc">Album</primary-type></release-group><release-group id="0010b7c6-daac-3308-bb84-75aad3bc270d" type="Album" type-id="f529b476-6e62-324f-b0aa-1f3e33d313fc"><title>Inquisitors of Satan</title><first-release-date>2002</first-release-date><primary-type id="f529b476-6e62-324f-b0aa-1f3e33d313fc">Album</primary-type></release-group><release-group id="e86d6657-80da-3d4d-8fe0-dc7c67c368fd" type="Album" type-id="f529b476-6e62-324f-b0aa-1f3e33d313fc"><title>Si monumentum requires, circumspice</title><first-release-date>2004-02</first-release-date><primary-type id="f529b476-6e62-324f-b0aa-1f3e33d313fc">Album</primary-type></release-group><release-group id="b24dd6bc-0793-3827-ba70-22ebf3d0119d" type="Album" type-id="f529b476-6e62-324f-b0aa-1f3e33d313fc"><title>From the Entrails to the Dirt</title><first-release-date>2004-05-31</first-release-date><primary-type id="f529b476-6e62-324f-b0aa-1f3e33d313fc">Album</primary-type></release-group><release-group id="0231a9bb-3934-3727-98f2-542066f55c38" type="Album" type-id="f529b476-6e62-324f-b0aa-1f3e33d313fc"><title>Crushing the Holy Trinity</title><first-release-date>2005-07-11</first-release-date><primary-type id="f529b476-6e62-324f-b0aa-1f3e33d313fc">Album</primary-type></release-group><release-group id="2cf2bf50-6b64-31b8-9e2f-ef3a74521844" type="Album" type-id="f529b476-6e62-324f-b0aa-1f3e33d313fc"><title>Fas — Ite, Maledicti, in Ignem Aeternum</title><first-release-date>2007-07-16</first-release-date><primary-type id="f529b476-6e62-324f-b0aa-1f3e33d313fc">Album</primary-type></release-group><release-group id="998e3abf-5cf1-4eee-a3bf-91e4d9b32cd4" type="Album" type-id="f529b476-6e62-324f-b0aa-1f3e33d313fc"><title>Veritas diaboli manet in aeternum</title><first-release-date>2008-12-08</first-release-date><primary-type id="f529b476-6e62-324f-b0aa-1f3e33d313fc">Album</primary-type></release-group><release-group id="f6883717-80b8-4a24-abf5-d3b7c93f0958" type="Album" type-id="f529b476-6e62-324f-b0aa-1f3e33d313fc"><title>Paracletus</title><first-release-date>2010-11-08</first-release-date><primary-type id="f529b476-6e62-324f-b0aa-1f3e33d313fc">Album</primary-type></release-group><release-group id="6ee6a4e4-2027-4a4a-85f6-a1e716231687" type="Album" type-id="f529b476-6e62-324f-b0aa-1f3e33d313fc"><title>The Synarchy of Molten Bones</title><first-release-date>2016-11-08</first-release-date><primary-type id="f529b476-6e62-324f-b0aa-1f3e33d313fc">Album</primary-type></release-group><release-group id="ca3f3373-6276-4533-9f67-eabce3b52bcf" type="Album" type-id="f529b476-6e62-324f-b0aa-1f3e33d313fc"><title>The Furnaces of Palingenesia</title><first-release-date>2019-05-24</first-release-date><primary-type id="f529b476-6e62-324f-b0aa-1f3e33d313fc">Album</primary-type></release-group><release-group id="cc68ad88-778b-3d70-a25e-7c173d05058e" type="Compilation" type-id="dd2a21e1-0c00-3729-a7a0-de60b84eb5d1"><title>Manifestations 2002</title><first-release-date>2008-03-20</first-release-date><primary-type id="f529b476-6e62-324f-b0aa-1f3e33d313fc">Album</primary-type><secondary-type-list><secondary-type id="dd2a21e1-0c00-3729-a7a0-de60b84eb5d1">Compilation</secondary-type></secondary-type-list></release-group><release-group id="55b089c9-23e1-3ae3-a3ec-8d76af3f8bf9" type="Compilation" type-id="dd2a21e1-0c00-3729-a7a0-de60b84eb5d1"><title>Manifestations 2000-2001</title><first-release-date>2008-03-20</first-release-date><primary-type id="f529b476-6e62-324f-b0aa-1f3e33d313fc">Album</primary-type><secondary-type-list><secondary-type id="dd2a21e1-0c00-3729-a7a0-de60b84eb5d1">Compilation</secondary-type></secondary-type-list></release-group><release-group id="b46c2332-37ce-4e90-ab18-e2058b4a1d18" type="Compilation" type-id="dd2a21e1-0c00-3729-a7a0-de60b84eb5d1"><title>Diabolus Absconditus / Mass Grave Aesthetics</title><first-release-date>2011-06-03</first-release-date><primary-type id="f529b476-6e62-324f-b0aa-1f3e33d313fc">Album</primary-type><secondary-type-list><secondary-type id="dd2a21e1-0c00-3729-a7a0-de60b84eb5d1">Compilation</secondary-type></secondary-type-list></release-group><release-group id="6c13630e-ec83-4a4b-8979-a435192c5dbb" type="Compilation" type-id="dd2a21e1-0c00-3729-a7a0-de60b84eb5d1"><title>Deathspell Omega</title><first-release-date>2012-07-09</first-release-date><primary-type id="f529b476-6e62-324f-b0aa-1f3e33d313fc">Album</primary-type><secondary-type-list><secondary-type id="dd2a21e1-0c00-3729-a7a0-de60b84eb5d1">Compilation</secondary-type></secondary-type-list></release-group><release-group id="be53ae84-6e4c-36a5-b9a0-459c13117f23" type="EP" type-id="6d0c5bf6-7a33-3420-a519-44fc63eedebf"><title>Mütiilation / Deathspell Omega</title><first-release-date>2002</first-release-date><primary-type id="6d0c5bf6-7a33-3420-a519-44fc63eedebf">EP</primary-type></release-group><release-group id="78d88ba0-225b-3a06-ac73-d728511c9f09" type="EP" type-id="6d0c5bf6-7a33-3420-a519-44fc63eedebf"><title>Kénôse</title><first-release-date>2005-05-08</first-release-date><primary-type id="6d0c5bf6-7a33-3420-a519-44fc63eedebf">EP</primary-type></release-group><release-group id="01d041c9-517c-3062-b79f-b8923f84dbaa" type="EP" type-id="6d0c5bf6-7a33-3420-a519-44fc63eedebf"><title>Veritas diaboli manet in aeternum: Chaining the Katechon</title><first-release-date>2008-12-08</first-release-date><primary-type id="6d0c5bf6-7a33-3420-a519-44fc63eedebf">EP</primary-type></release-group><release-group id="ae9ac3fd-eeca-3e9d-aad7-0950f1e86a13" type="EP" type-id="6d0c5bf6-7a33-3420-a519-44fc63eedebf"><title>Mass Grave Aesthetics</title><first-release-date>2008-12-15</first-release-date><primary-type id="6d0c5bf6-7a33-3420-a519-44fc63eedebf">EP</primary-type></release-group><release-group id="d2f16826-0bb5-4287-8506-27302630cb36" type="EP" type-id="6d0c5bf6-7a33-3420-a519-44fc63eedebf"><title>Diabolus absconditus</title><first-release-date>2011-05</first-release-date><primary-type id="6d0c5bf6-7a33-3420-a519-44fc63eedebf">EP</primary-type></release-group><release-group id="900ce67c-e582-439d-8376-b0d9316bf1ec" type="EP" type-id="6d0c5bf6-7a33-3420-a519-44fc63eedebf"><title>Drought</title><first-release-date>2012-06-22</first-release-date><primary-type id="6d0c5bf6-7a33-3420-a519-44fc63eedebf">EP</primary-type></release-group><release-group id="e858875d-e9b3-3283-b031-58e70a1e1146" type="EP" type-id="6d0c5bf6-7a33-3420-a519-44fc63eedebf"><title>Disciples of the Ultimate Void</title><first-release-date>1999-07-01</first-release-date><primary-type id="6d0c5bf6-7a33-3420-a519-44fc63eedebf">EP</primary-type><secondary-type-list><secondary-type id="81598169-0d6c-3bce-b4be-866fa658eda3">Demo</secondary-type></secondary-type-list></release-group></release-group-list></metadata>
"""


def test_parser():
    parser = MusicBrainz()
    result = [x for x in parser.parse_releases(xml)]
    assert len(result) == 23
    sample = result[0]
    assert sample["title"] == "Sob a lua do bode / Demoniac Vengeance"
